<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>choreworld</title>
	<link rel="stylesheet" type="text/css" href="styles.css">
	<link rel="icon" type="image/png" href="assets/favicon.png">
	<link rel="apple-touch-icon" href="assets/dishes-square.png">
</head>
<body>

<main>

<h1>Welcome to choreworld</h1>

<img src="assets/dishes.jpg" style="width: 20%;">

<form>
	<label for="date">Select date</label>
	<input id="date" type="date" name="date"/>
</form>

<h2>Chores for week ending <span id="week-end"></span></h2>

<h3>Flat chores</h3>

<h4>Bins</h4>
<p id="bins"></p>

<h4>Kitchen</h4>
<p id="kitchen"></p>

<h4>Mop</h4>
<p id="mop"></p>

<h4>Downstairs toilet and lounge</h4>
<p id="toilet-lounge"></p>

<h4>Vacuum</h4>
<p id="vacuum"></p>

<h3>Upstairs</h3>

<h4>Upstairs bathroom</h4>
<p id="upstairs-bathroom"></p>

<h3>Downstairs bedroom</h3>

<h4>Downstairs bedroom bathroom</h4>
<p id="downtairs-bedroom-bathroom"></p>

</main>


<footer>
<img src="assets/cool-millie-pyramid.gif" style="width:30%;">
<p><a href="https://github.com/choreworld/choreworld.github.io/issues">Feedback</a></p>
<p>choreworld v0.1 &copy; choreworld 2021</p>
</footer>

<script src="chores.js"></script>
<script type="text/javascript">
(function () {
	function update_page(offset) {
		let all_chores = [
			[
				[
					"bins",
					"kitchen",
					"mop",
					"toilet-lounge",
					"vacuum"
				],
				[
					"Ashton",
					"Dan",
					"Harry",
					"Sophie",
					"Millie"
				]
			],
			[
				[
					"upstairs-bathroom"
				],
				[
					"Dan",
					"Harry",
					"Sophie"
				]
			],
			[
				[
					"downtairs-bedroom-bathroom"
				],
				[
					"Millie",
					"Ashton"
				]
			]
		];

		for (let group = 0; group < all_chores.length; group++) {
			let chores = all_chores[group][0];
			let people = all_chores[group][1];
			let assignments = assign_chores(offset, chores, people);
			for (let i = 0; i < chores.length; i++) {
				let chore = chores[i];
				document.getElementById(chore).innerText = assignments[chore];
			}

			document.getElementById("week-end").innerText = end_of_week(offset).toDateString();
		}
	}

	update_page(current_offset());

	let datepicker = document.getElementById("date");
	datepicker.value = (new Date()).toISOString().split('T')[0];
	datepicker.addEventListener("change", function (event) {
		let date = new Date(datepicker.value);
		let offset = date_to_offset(date);
		update_page(offset);
	});
})();
</script>

</body>
</html>
